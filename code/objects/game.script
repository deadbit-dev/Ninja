local config = require "code.config"
local State = require "code.state"
local EventBus = require "code.modules.utils.eventbus"

function init(self)
  self.id = go.get_id()
  EventBus:subscribe(config.ON_START_SCENE, self.id)
end

function on_message(self, message_id, message)
  if message_id == config.ON_START_SCENE then
    init_game()  
  end
end

function init_game()
  State.context.spawn_interval = config.SPAWN_INTERVAL
  State.context.units_by_pack = config.UNITS_BY_PACK

  EventBus:emit(config.ON_START_SPAWN)
end